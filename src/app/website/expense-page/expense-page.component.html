<div class="page-content">
    <p-toast position="top-center" class="msg"></p-toast>
    <p-table [value]="expense" class="table">
        <ng-template pTemplate="header" class="table-head">
            <tr>
                <th></th>
                <th>Category</th>
                <th>Name</th>
                <th>January</th>
                <th>February</th>
                <th>March</th>
                <th>April</th>
                <th>May</th>
                <th>June</th>
                <th>July</th>
                <th>August</th>
                <th>September</th>
                <th>October</th>
                <th>November</th>
                <th>December</th>
                <th>Total</th>
                <th>Notes</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-expense>
            <tr>
                <td class="editButtons">
                    <button pButton type="button" icon="pi pi-save" class="p-button-rounded" (click)="saveRowChanges(expense)"></button>
                    <button pButton type="button" icon="pi pi-times" class="p-button-rounded p-button-danger" (click)="deleteRow(expense)"></button>
                </td>

                <td pEditableColumn>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="expense.category">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{expense.category}}
                        </ng-template>
                    </p-cellEditor>
                </td>

                <td pEditableColumn>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="expense.name">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{expense.name}}
                        </ng-template>
                    </p-cellEditor>
                </td>

                <td pEditableColumn>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="expense.january">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{expense.january}}
                        </ng-template>
                    </p-cellEditor>
                </td>

                <td pEditableColumn>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="expense.february">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{expense.february}}
                        </ng-template>
                    </p-cellEditor>
                </td>

                <td pEditableColumn>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="expense.march">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{expense.march}}
                        </ng-template>
                    </p-cellEditor>
                </td>

                <td pEditableColumn>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="expense.april">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{expense.april}}
                        </ng-template>
                    </p-cellEditor>
                </td>

                <td pEditableColumn>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="expense.may">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{expense.may}}
                        </ng-template>
                    </p-cellEditor>
                </td>

                <td pEditableColumn>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="expense.june">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{expense.june}}
                        </ng-template>
                    </p-cellEditor>
                </td>

                <td pEditableColumn>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="expense.july">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{expense.july}}
                        </ng-template>
                    </p-cellEditor>
                </td>

                <td pEditableColumn>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="expense.august">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{expense.august}}
                        </ng-template>
                    </p-cellEditor>
                </td>

                <td pEditableColumn>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="expense.september">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{expense.september}}
                        </ng-template>
                    </p-cellEditor>
                </td>

                <td pEditableColumn>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="expense.october">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{expense.october}}
                        </ng-template>
                    </p-cellEditor>
                </td>

                <td pEditableColumn>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="expense.november">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{expense.november}}
                        </ng-template>
                    </p-cellEditor>
                </td>

                <td pEditableColumn>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="expense.december">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{expense.december}}
                        </ng-template>
                    </p-cellEditor>
                </td>

                <td>
                    {{expense.total}}
                </td>

                <td>
                    <p-dialog header="Notes" [(visible)]="modalDisplay" [modal]="true" [style]="{minWidth: '320px'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">
                        <textarea [rows]="5" [cols]="30" pInputTextarea [(ngModel)]="displayedNote" autoResize="autoResize" style="min-height: 50px;"></textarea>
                        <ng-template pTemplate="footer">
                            <button pButton type="button" label="Save" (click)="saveRowNotes()"></button>
                            <button pButton type="button" label="Back" (click)="closeRowNotes()"></button>
                        </ng-template>
                    </p-dialog>
                    <button pButton type="button" icon="pi pi-book" class="p-button-rounded" (click)="showRowNotes(expense)"></button>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="footer">
            <tr>
                <td></td>
                <td>
                    <button pButton type="button" label="Add Row" class="p-button-rounded p-button-danger"  (click)="addRow()"></button>
                </td>
                <td>Total</td>
                <td>{{monthlyExpense[0]}}</td>
                <td>{{monthlyExpense[1]}}</td>
                <td>{{monthlyExpense[2]}}</td>
                <td>{{monthlyExpense[3]}}</td>
                <td>{{monthlyExpense[4]}}</td>
                <td>{{monthlyExpense[5]}}</td>
                <td>{{monthlyExpense[6]}}</td>
                <td>{{monthlyExpense[7]}}</td>
                <td>{{monthlyExpense[8]}}</td>
                <td>{{monthlyExpense[9]}}</td>
                <td>{{monthlyExpense[10]}}</td>
                <td>{{monthlyExpense[11]}}</td>
                <td></td>
                <td></td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage" let-columns>
            <tr>
                <td [attr.colspan]="8" style="color: lightcoral;">
                    No records found
                </td>
                <td [attr.colspan]="9">
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>